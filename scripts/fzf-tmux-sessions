#!/usr/bin/env bash

sesh connect "$(
	sesh list --hide-attached --icons |
		rg --invert-match '(scratch)' | # exclude this entries, use regex: /(name1|name2)/
		fzf-tmux -p 55%,60% \
			--no-sort --border-label ' sesh ' --prompt '⚡  ' \
			--header '  ^a all ^t tmux ^g configs ^x zoxide ^d tmux kill ^f find' \
			--bind 'tab:down,btab:up' \
			--bind 'ctrl-a:change-prompt(⚡  )+reload(sesh list --hide-attached --icons)' \
			--bind 'ctrl-t:change-prompt(🪟  )+reload(sesh list -t --hide-attached --icons)' \
			--bind 'ctrl-g:change-prompt(⚙️  )+reload(sesh list -c --hide-attached --icons)' \
			--bind 'ctrl-x:change-prompt(📁  )+reload(sesh list -z --hide-attached --icons)' \
			--bind 'ctrl-f:change-prompt(🔎  )+reload(fd -H -d 2 -t d -E .Trash . ~)' \
			--bind 'ctrl-d:execute(tmux kill-session -t {})+change-prompt(⚡  )+reload(sesh list --hide-attached --icons)'
)"
